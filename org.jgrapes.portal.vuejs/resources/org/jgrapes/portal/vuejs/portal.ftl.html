<!doctype html>

<html lang="${locale.toLanguageTag()}">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Portal -->
<link rel="icon" href="${renderSupport.portalResource('favicon.ico')}">
<title>${_("portalTitle")}</title>

<!-- CSS -->
<link rel="stylesheet" 
  href="${renderSupport.portalResource('lib/normalize.css')}">
<link rel="stylesheet"
  href="${renderSupport.portalResource('lib/gridstack' + minifiedExtension + '.css')}" />
<link rel="stylesheet" 
  href="${renderSupport.portalResource('jgp-components.css')}">
<!-- Portal -->
<link rel="stylesheet"
  href="${renderSupport.pageResource('fontawesome-free/css/all' + minifiedExtension + '.css')}" />
<link rel="stylesheet"
  href="${renderSupport.portalBaseResource('portal' + minifiedExtension + '.css')}" />
<link rel="stylesheet"
  href="${renderSupport.portalResource('portal-layout' + minifiedExtension + '.css')}" />
<link rel="stylesheet"
  href="${renderSupport.portalResource('portal-styling' + minifiedExtension + '.css')}" />

<!-- Scripts(s) -->
<script
  src="${renderSupport.pageResource('jquery/jquery' + minifiedExtension + '.js')}"></script>
<script
  src="${renderSupport.portalResource('lib/gridstack.all.js')}"></script>
<script
  src="${renderSupport.portalResource('lib/jquery.ui.touch-punch-0.2.3' + minifiedExtension + '.js')}"></script>
  
</head>

<body id="page-top" class="index portal-vuejs">

  <#include "portal-header.ftl.html">

  <main role="main">

  <div class="portalVue">
    <jgp-tablist id="portalTabs"></jgp-tablist>
  </div>
  <div id="portalPanels">
    <section id="portalOverviewPanel" hidden>
      <div id="portalPreviews" class="grid-stack" role="grid">
      </div>
    </section>
  </div>
  
  </main>

  <!-- Footer -->
  <#include "portal-footer.ftl.html">

<script type="module">
import Vue from "${renderSupport.pageResource('vue/vue.esm.browser.js')}";
import Vuex from "${renderSupport.portalResource('lib/vuex.esm.browser.js')}";
import "${renderSupport.portalResource('jgp-components.js')}";
import JGPortal from "${renderSupport.portalBaseResource('jgportal.js')}";
import VueJsPortal from "${renderSupport.portalResource('vuejsportal.js')}";

Vue.use(Vuex);
Vue.prototype.$window = window;

const localeMenuitems = [
  // <#list supportedLanguages as l>
  ['${l.label}', '${l.locale.toLanguageTag()}'],
  // </#list>
];

const portalMessages = {
    // <#list supportedLanguages as l>
    '${l.locale.toLanguageTag()}': {
        // <#list l.l10nBundle.keys as key>
        '${key}': '${l.l10nBundle.getString(key)}',
        // </#list>
    },
    // </#list>    
};

const renderer = new VueJsPortal.Renderer(localeMenuitems, portalMessages);

JGPortal.init(["jquery"], "${portalSessionId}", ${portalSessionRefreshInterval?c}, 
    ${portalSessionInactivityTimeout?c}, renderer);

</script>
 
</body>
</html>