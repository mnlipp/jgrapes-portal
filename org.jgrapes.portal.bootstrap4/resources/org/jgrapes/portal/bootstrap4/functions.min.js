var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(c){var a=function(){};a.prototype=c;return new a};$jscomp.underscoreProtoCanBeSet=function(){var c={a:!0},a={};try{return a.__proto__=c,a.a}catch(b){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(c,a){c.__proto__=a;if(c.__proto__!==a)throw new TypeError(c+" is not extensible");return c}:null;
$jscomp.inherits=function(c,a){c.prototype=$jscomp.objectCreate(a.prototype);c.prototype.constructor=c;if($jscomp.setPrototypeOf){var b=$jscomp.setPrototypeOf;b(c,a)}else for(b in a)if("prototype"!=b)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(a,b);d&&Object.defineProperty(c,b,d)}else c[b]=a[b];c.superClass_=a.prototype};
$jscomp.findInternal=function(c,a,b){c instanceof String&&(c=String(c));for(var d=c.length,e=0;e<d;e++){var f=c[e];if(a.call(b,f,e,c))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,a,b){c!=Array.prototype&&c!=Object.prototype&&(c[a]=b.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(c,a,b,d){if(a){b=$jscomp.global;c=c.split(".");for(d=0;d<c.length-1;d++){var e=c[d];e in b||(b[e]={});b=b[e]}c=c[c.length-1];d=b[c];a=a(d);a!=d&&null!=a&&$jscomp.defineProperty(b,c,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");$jscomp.polyfill("Object.is",function(c){return c?c:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(c){return c?c:function(a,b){var d=this;d instanceof String&&(d=String(d));var c=d.length;for(b=b||0;b<c;b++)if(d[b]==a||Object.is(d[b],a))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(c,a,b){if(null==c)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return c+""};$jscomp.polyfill("String.prototype.includes",function(c){return c?c:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");var B4UIPortal={};
(function(){var c=JGPortal.log;B4UIPortal.Renderer=function(a){var b=JGPortal.Renderer.call(this)||this;B4UIPortal.l10n=a;b._connectionLostNotification=null;b._lastPreviewLayout=[];b._lastTabsLayout=[];b._lastXtraInfo={};b._tabCounter=1;return b};$jscomp.inherits(B4UIPortal.Renderer,JGPortal.Renderer);B4UIPortal.Renderer.prototype.init=function(){var a=this;c.debug("Locking screen");$("#portalLanguageMenu").on("click","[data-locale]",function(){a.sendSetLocale($(this).data("locale"))});var b={cellHeight:80,
verticalMargin:10,handle:".card-header",alwaysShowResizeHandle:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),disableOneColumnMode:!0};$("#portalPreviews").gridstack(b);$("#portalPreviews").on("change",function(b,c){a._layoutChanged()});$("#portalTabs").on("click",".portlet-tab-close",function(){var b=$(this).closest("li").remove().attr("data-portlet-tab");$("#"+b+"-pane").remove();$("#portalOverviewTab").tab("show");a._layoutChanged()})};B4UIPortal.Renderer.prototype.connectionLost=
function(){null==this._connectionLostNotification&&(this._connectionLostNotification=this.notification(B4UIPortal.l10n.serverConnectionLost,{error:!0,closeable:!1}))};B4UIPortal.Renderer.prototype.connectionRestored=function(){null!=this._connectionLostNotification&&this._connectionLostNotification.alert("close");this.notification(B4UIPortal.l10n.serverConnectionRestored,{type:"success",autoClose:2E3})};B4UIPortal.Renderer.prototype.connectionSuspended=function(a){var b=$('<div class="modal" tabindex="-1" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">'+
B4UIPortal.l10n.sessionSuspendedTitle+'</h5></button></div><div class="modal-body"><p>'+B4UIPortal.l10n.sessionSuspendedMessage+'</p></div><div class="modal-footer"><button type="button" class="btn btn-primary" data-dismiss="modal">'+B4UIPortal.l10n.ok+"</button></div></div></div></div>");b.find(".modal-footer button").on("click",function(){a()});b.modal()};B4UIPortal.Renderer.prototype.portalConfigured=function(){this._layoutChanged();c.debug("Unlocking screen");$("#loader-overlay").fadeOut("slow")};
B4UIPortal.Renderer.prototype.addPortletType=function(a,b,d){var c=this;a=$('<a class="dropdown-item" href="#" data-portlet-type="'+a+'">'+b+"</a>");a.on("click",function(a){c.sendAddPortlet($(this).data("portlet-type"))});$("#portalNavbarPortletList").append(a)};B4UIPortal.Renderer.prototype.lastPortalLayout=function(a,b,d){this._lastPreviewLayout=a;this._lastTabsLayout=b;this._lastXtraInfo=d};B4UIPortal.Renderer.prototype.updatePortletPreview=function(a,b,d,c,f){c=$(c);if(a){b.addClass("card");
b.append('<h6 class="card-header portlet-preview-header d-flex flex-row"></h6><div class="card-body portlet-preview-content"></div>');this._setModeIcons(b,d);var e=b.attr("data-portlet-id");d=a=null;var g=4,h=4;e in this._lastXtraInfo?(a=this._lastXtraInfo[e][0],d=this._lastXtraInfo[e][1],g=this._lastXtraInfo[e][2],h=this._lastXtraInfo[e][3]):(c.attr("data-portlet-grid-columns")&&(g=c.attr("data-portlet-grid-columns")),c.attr("data-portlet-grid-rows")&&(h=c.attr("data-portlet-grid-rows")),1200>$(window).width()&&
(g=Math.max(320,$(window).width()),g=Math.round(12-.0125*(g-320))));e=$('<div class="grid-stack-item" data-gs-auto-position="1" role="gridcell"></div>');b.addClass("grid-stack-item-content");e.append(b);$("#portalPreviews").data("gridstack").addWidget(e,a,d,g,h,null==a||null==d);this._layoutChanged()}a=b.find(".portlet-preview-header");a.find(".portlet-preview-title").remove();a.prepend("<span class='portlet-preview-title flex-fill'>"+c.attr("data-portlet-title")+"</span>");b=b.find(".portlet-preview-content");
this._styleSemantics(c);b.empty();b.append(c);f&&$("#portalOverviewTab").tab("show")};B4UIPortal.Renderer.prototype._setModeIcons=function(a,b){var c=this;a=a.find(".portlet-preview-header");a.find(".portlet-preview-icon").remove();b.includes("Edit")&&(a.append("<a href='#' class='portlet-preview-icon portlet-edit ml-2 fa fa-wrench' role='button'></a>"),a.find(".portlet-edit").on("click",function(){var a=$(this).closest(".portlet").attr("data-portlet-id");c.sendRenderPortlet(a,"Edit",!0)}));b.includes("DeleteablePreview")&&
(a.append("<a href='#' class='portlet-preview-icon portlet-delete ml-2 fa fa-times' role='button'></a>"),a.find(".portlet-delete").on("click",function(){var a=$(this).closest(".portlet").attr("data-portlet-id");c.sendDeletePortlet(a)}));b.includes("View")&&(a.append("<a href='#' class='portlet-preview-icon portlet-expand ml-2 fa fa-expand' role='button'></a>"),a.find(".portlet-expand").on("click",function(){var a=$(this).closest(".portlet").attr("data-portlet-id"),b=c.findPortletView(a);b?c._activatePortletView(b):
c.sendRenderPortlet(a,"View",!0)}))};B4UIPortal.Renderer.prototype._activatePortletView=function(a){a=a.attr("data-portlet-tab-tab");$("#"+a).tab("show")};B4UIPortal.Renderer.prototype.updatePortletView=function(a,b,c,e,f){c=$(e);this._styleSemantics(c);if(a){this._tabCounter+=1;a="portlet-tab-"+this._tabCounter;e=$("#portalTabs");var d=$('<li class="nav-item" data-portlet-tab="'+a+'" data-portlet-id="'+b.attr("data-portlet-id")+'"><a class="nav-link" role="tab" id="'+a+'-tab" data-toggle="tab" href="#'+
a+'-pane" alt="'+B4UIPortal.l10n.close+'">'+c.attr("data-portlet-title")+'<span class="fa fa-times ml-2 text-primary portlet-tab-close"></span></a></li>');e.append(d);b.addClass("tab-pane fade m-3");b.attr("id",a+"-pane");b.attr("data-portlet-tab-tab",a+"-tab");b.attr("role","tabpanel");b.attr("aria-labelledby",a+"-tab");b.append(c);$("#portalTabPanes").append(b);this._layoutChanged()}else b.children().detach(),b.append(c);f&&this._activatePortletView(b)};B4UIPortal.Renderer.prototype._styleSemantics=
function(a){a.find("[data-style-semantics]").addBack("[data-style-semantics]").each(function(){$(this).find("*").addBack().each(function(){var a=$(this);"BUTTON"!=a.prop("tagName")||a.hasClass("btn")||a.addClass("btn btn-primary")})})};B4UIPortal.Renderer.prototype.portletRemoved=function(a){a.forEach(function(a){a=$(a);if(a.hasClass("portlet-preview")){var b=$("#portalPreviews").data("gridstack"),c=a.closest(".grid-stack-item");b.removeWidget(c)}a.hasClass("portlet-view")&&($("#portalOverviewTab").tab("show"),
b=a.attr("data-portlet-tab-tab"),$("#"+b).closest("li").remove(),a.remove())});this._layoutChanged()};B4UIPortal.Renderer.prototype.notification=function(a,b){var c=$('<div class="alert alert-dismissible fade show" role="alert"></div>');"error"in b&&b.error?c.addClass("alert-danger"):"type"in b?"success"==b.type?c.addClass("alert-success"):"success"==b.type?c.addClass("alert-success"):"warning"==b.type?c.addClass("alert-warning"):"error"==b.type?c.addClass("alert-danger"):c.addClass("alert-info"):
c.addClass("alert-info");a=$("<div>"+a+"</div>");""==a.text()&&0<a.children.size()&&(a=a.children());c.append(a);"closeable"in b&&!b.closeable||c.append($('<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'));$("#notification-area").prepend(c);"autoClose"in b&&setTimeout(function(){c.alert("close")},b.autoClose);return c};B4UIPortal.Renderer.prototype._layoutChanged=function(){var a=[];$("#portalPreviews .grid-stack-item").each(function(){a.push($(this))});
a.sort(function(a,b){return a.attr("data-gs-y")!=b.attr("data-gs-y")?b.attr("data-gs-y")-a.attr("data-gs-y"):b.attr("data-gs-x")-a.attr("data-gs-x")});var b=[],c={};a.forEach(function(a){var d=a.find(".portlet-preview[data-portlet-id]").attr("data-portlet-id");b.push(d);c[d]=[a.attr("data-gs-x"),a.attr("data-gs-y"),a.attr("data-gs-width"),a.attr("data-gs-height")]});var e=[];$("#portalTabPanes > [data-portlet-id]").each(function(a){a=$(this).attr("data-portlet-id");e.push(a)});this.sendLayout(b,e,
c)};B4UIPortal.Renderer.prototype.updatePortletTitle=function(a,b){var c=$("#portalPreviews .portlet-preview[data-portlet-id='"+a+"'");0<c.length&&(c=c.find(".portlet-preview-header"),c.find(".portlet-preview-title").remove(),c.prepend("<span class='portlet-preview-title flex-fill'>"+b+"</span>"));a=$("#portalTabs .nav-item[data-portlet-id='"+a+"']");0<a.length&&(a=a.find(".nav-link"),c=a.find(".portlet-tab-close").detach(),a.empty(),a.append(b),a.append(c))};B4UIPortal.Renderer.prototype.updatePortletModes=
function(a,b){(a=this.findPortletPreview(a))&&this._setModeIcons(a,b)};B4UIPortal.Renderer.prototype.showEditDialog=function(a,b,c){var d=$(c);a.append(d);b=$('<div class="modal" tabindex="-1" role="dialog"><div class="modal-dialog modal-lg" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" alt="'+B4UIPortal.l10n.close+'"><span aria-hidden="true">&times;</span></button></div><div class="modal-body"></div><div class="modal-footer"><button type="button" class="btn btn-primary" data-dismiss="modal">'+
B4UIPortal.l10n.ok+"</button></div></div></div></div>");b.find(".modal-body").append($(a));b.find(".btn-primary").on("click",function(){d.trigger("JGrapes.editDialog.apply",[a])});b.modal()}})();
//# sourceMappingURL=functions.min.js.map
