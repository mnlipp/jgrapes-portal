var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,c,e){b!=Array.prototype&&b!=Object.prototype&&(b[c]=e.value)};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var b=0;return function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+b++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(b){var c=0;return $jscomp.iteratorPrototype(function(){return c<b.length?{done:!1,value:b[c++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};$jscomp.makeIterator=function(b){$jscomp.initSymbolIterator();var c=b[Symbol.iterator];return c?c.call(b):$jscomp.arrayIterator(b)};$jscomp.arrayFromIterator=function(b){for(var c,e=[];!(c=b.next()).done;)e.push(c.value);return e};$jscomp.arrayFromIterable=function(b){return b instanceof Array?b:$jscomp.arrayFromIterator($jscomp.makeIterator(b))};
$jscomp.checkStringArgs=function(b,c,e){if(null==b)throw new TypeError("The 'this' value for String.prototype."+e+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+e+" must not be a regular expression");return b+""};
$jscomp.polyfill=function(b,c,e,h){if(c){e=$jscomp.global;b=b.split(".");for(h=0;h<b.length-1;h++){var g=b[h];g in e||(e[g]={});e=e[g]}b=b[b.length-1];h=e[b];c=c(h);c!=h&&null!=c&&$jscomp.defineProperty(e,b,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("String.prototype.endsWith",function(b){return b?b:function(b,e){var c=$jscomp.checkStringArgs(this,b,"endsWith");b+="";void 0===e&&(e=c.length);e=Math.max(0,Math.min(e|0,c.length));for(var g=b.length;0<g&&0<e;)if(c[--e]!=b[--g])return!1;return 0>=g}},"es6","es3");$jscomp.checkEs6ConformanceViaProxy=function(){try{var b={},c=Object.create(new $jscomp.global.Proxy(b,{get:function(e,h,g){return e==b&&"q"==h&&g==c}}));return!0===c.q}catch(e){return!1}};
$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.owns=function(b,c){return Object.prototype.hasOwnProperty.call(b,c)};
$jscomp.polyfill("WeakMap",function(b){function c(){if(!b||!Object.seal)return!1;try{var a=Object.seal({}),f=Object.seal({}),m=new b([[a,2],[f,3]]);if(2!=m.get(a)||3!=m.get(f))return!1;m.delete(a);m.set(f,4);return!m.has(a)&&4==m.get(f)}catch(l){return!1}}function e(a){$jscomp.owns(a,g)||$jscomp.defineProperty(a,g,{value:{}})}function h(a){var f=Object[a];f&&(Object[a]=function(a){e(a);return f(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(b&&$jscomp.ES6_CONFORMANCE)return b}else if(c())return b;
var g="$jscomp_hidden_"+Math.random();h("freeze");h("preventExtensions");h("seal");var k=0,a=function(a){this.id_=(k+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var f;!(f=a.next()).done;)f=f.value,this.set(f[0],f[1])}};a.prototype.set=function(a,f){e(a);if(!$jscomp.owns(a,g))throw Error("WeakMap key fail: "+a);a[g][this.id_]=f;return this};a.prototype.get=function(a){return $jscomp.owns(a,g)?a[g][this.id_]:void 0};a.prototype.has=
function(a){return $jscomp.owns(a,g)&&$jscomp.owns(a[g],this.id_)};a.prototype.delete=function(a){return $jscomp.owns(a,g)&&$jscomp.owns(a[g],this.id_)?delete a[g][this.id_]:!1};return a},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(b){function c(){if($jscomp.ASSUME_NO_NATIVE_MAP||!b||"function"!=typeof b||!b.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),d=new b($jscomp.makeIterator([[a,"s"]]));if("s"!=d.get(a)||1!=d.size||d.get({x:4})||d.set({x:4},"t")!=d||2!=d.size)return!1;var l=d.entries(),c=l.next();if(c.done||c.value[0]!=a||"s"!=c.value[1])return!1;c=l.next();return c.done||4!=c.value[0].x||"t"!=c.value[1]||!l.next().done?!1:!0}catch(n){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(b&&$jscomp.ES6_CONFORMANCE)return b}else if(c())return b;$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=new WeakMap,h=function(f){this.data_={};this.head_=a();this.size=0;if(f){f=$jscomp.makeIterator(f);for(var d;!(d=f.next()).done;)d=d.value,this.set(d[0],d[1])}};h.prototype.set=function(a,d){var f=g(this,a);f.list||(f.list=this.data_[f.id]=[]);f.entry?f.entry.value=d:(f.entry={next:this.head_,previous:this.head_.previous,head:this.head_,
key:a,value:d},f.list.push(f.entry),this.head_.previous.next=f.entry,this.head_.previous=f.entry,this.size++);return this};h.prototype.delete=function(a){a=g(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};h.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=a();this.size=0};h.prototype.has=function(a){return!!g(this,a).entry};
h.prototype.get=function(a){return(a=g(this,a).entry)&&a.value};h.prototype.entries=function(){return k(this,function(a){return[a.key,a.value]})};h.prototype.keys=function(){return k(this,function(a){return a.key})};h.prototype.values=function(){return k(this,function(a){return a.value})};h.prototype.forEach=function(a,d){for(var f=this.entries(),b;!(b=f.next()).done;)b=b.value,a.call(d,b[1],b[0],this)};h.prototype[Symbol.iterator]=h.prototype.entries;var g=function(a,b){var f=b&&typeof b;"object"==
f||"function"==f?e.has(b)?f=e.get(b):(f=""+ ++d,e.set(b,f)):f="p_"+b;var c=a.data_[f];if(c&&$jscomp.owns(a.data_,f))for(a=0;a<c.length;a++){var m=c[a];if(b!==b&&m.key!==m.key||b===m.key)return{id:f,list:c,index:a,entry:m}}return{id:f,list:c,index:-1,entry:void 0}},k=function(a,d){var f=a.head_;return $jscomp.iteratorPrototype(function(){if(f){for(;f.head!=a.head_;)f=f.previous;for(;f.next!=f.head;)return f=f.next,{done:!1,value:d(f)};f=null}return{done:!0,value:void 0}})},a=function(){var a={};return a.previous=
a.next=a.head=a},d=0;return h},"es6","es3");
$jscomp.polyfill("Set",function(b){function c(){if($jscomp.ASSUME_NO_NATIVE_SET||!b||"function"!=typeof b||!b.prototype.entries||"function"!=typeof Object.seal)return!1;try{var c=Object.seal({x:4}),e=new b($jscomp.makeIterator([c]));if(!e.has(c)||1!=e.size||e.add(c)!=e||1!=e.size||e.add({x:4})!=e||2!=e.size)return!1;var k=e.entries(),a=k.next();if(a.done||a.value[0]!=c||a.value[1]!=c)return!1;a=k.next();return a.done||a.value[0]==c||4!=a.value[0].x||a.value[1]!=a.value[0]?!1:k.next().done}catch(d){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(b&&$jscomp.ES6_CONFORMANCE)return b}else if(c())return b;$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=function(b){this.map_=new Map;if(b){b=$jscomp.makeIterator(b);for(var c;!(c=b.next()).done;)this.add(c.value)}this.size=this.map_.size};e.prototype.add=function(b){this.map_.set(b,b);this.size=this.map_.size;return this};e.prototype.delete=function(b){b=this.map_.delete(b);this.size=this.map_.size;return b};e.prototype.clear=function(){this.map_.clear();
this.size=0};e.prototype.has=function(b){return this.map_.has(b)};e.prototype.entries=function(){return this.map_.entries()};e.prototype.values=function(){return this.map_.values()};e.prototype.keys=e.prototype.values;e.prototype[Symbol.iterator]=e.prototype.values;e.prototype.forEach=function(b,c){var e=this;this.map_.forEach(function(a){return b.call(c,a,a,e)})};return e},"es6","es3");
$jscomp.polyfill("Array.from",function(b){return b?b:function(b,e,h){$jscomp.initSymbolIterator();e=null!=e?e:function(a){return a};var c=[],k=b[Symbol.iterator];if("function"==typeof k)for(b=k.call(b);!(k=b.next()).done;)c.push(e.call(h,k.value));else{k=b.length;for(var a=0;a<k;a++)c.push(e.call(h,b[a]))}return c}},"es6","es3");
$jscomp.polyfill("String.prototype.startsWith",function(b){return b?b:function(b,e){var c=$jscomp.checkStringArgs(this,b,"startsWith");b+="";var g=c.length,k=b.length;e=Math.max(0,Math.min(e|0,c.length));for(var a=0;a<k&&e<g;)if(c[e++]!=b[a++])return!1;return a>=k}},"es6","es3");$jscomp.findInternal=function(b,c,e){b instanceof String&&(b=String(b));for(var h=b.length,g=0;g<h;g++){var k=b[g];if(c.call(e,k,g,b))return{i:g,v:k}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,e){return $jscomp.findInternal(this,b,e).v}},"es6","es3");$jscomp.iteratorFromArray=function(b,c){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var e=0,h={next:function(){if(e<b.length){var g=e++;return{value:c(g,b[g]),done:!1}}h.next=function(){return{done:!0,value:void 0}};return h.next()}};h[Symbol.iterator]=function(){return h};return h};
$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");$jscomp.polyfill("Object.values",function(b){return b?b:function(b){var c=[],h;for(h in b)$jscomp.owns(b,h)&&c.push(b[h]);return c}},"es8","es3");var JGPortal={};
(function(){function b(a,d){this.keys=[];this.labelsByKey={};for(var f in a)this.keys.push(a[f][0]),this.labelsByKey[a[f][0]]=a[f][1];this.sortKey="";this.sortOrders={};for(var b in this.keys)this.sortOrders[this.keys[b]]=1;this.filterKey="";d&&"sortKey"in d&&this.sortBy(d.sortKey)}var c={debug:function(a){console&&console.debug&&console.debug(a)},info:function(a){console&&console.info&&console.info(a)},warn:function(a){console&&console.warn&&console.warn(a)},error:function(a){console&&console.error&&
console.error(a)}};JGPortal.log=c;var e=function(a){this._debugHandler=!1;this._portal=a;this._ws=null;this._sendQueue=[];this._recvQueue=[];this._recvQueueLocks=0;this._messageHandlers={};this._refreshTimer=null;this._inactivity=0;this._reconnectTimer=null;this._connectRequested=!1;this._initialConnect=!0;this._portalSessionId=null;this._connectionLost=!1;this._oldPortalSessionId=sessionStorage.getItem("org.jgrapes.portal.base.sessionId")};e.prototype.portalSessionId=function(){return this._portalSessionId};
e.prototype._connect=function(){var a=("https:"===window.location.protocol?"wss":"ws")+"://"+window.location.host+window.location.pathname;a.endsWith("/")||(a+="/");this._portalSessionId=sessionStorage.getItem("org.jgrapes.portal.base.sessionId");a+="portal-session/"+this._portalSessionId;this._oldPortalSessionId&&(a+="?was="+this._oldPortalSessionId,this._oldPortalSessionId=null);c.debug("Creating WebSocket for "+a);this._ws=new WebSocket(a);c.debug("Created WebSocket with readyState "+this._ws.readyState);
var d=this;this._ws.onopen=function(){c.debug("OnOpen called for WebSocket.");d._connectionLost&&(d._connectionLost=!1,d._portal.connectionRestored());d._drainSendQueue();if(d._initialConnect)d._initialConnect=!1;else{var a=d._portal._renderer;a.findPreviewIds().forEach(function(d){a.sendRenderPortlet(d,["Preview"])});a.findViewIds().forEach(function(d){a.sendRenderPortlet(d,["View"])})}d._refreshTimer=setInterval(function(){0==d._sendQueue.length&&(d._inactivity+=d._portal.sessionRefreshInterval,
0<d._portal.sessionInactivityTimeout&&d._inactivity>=d._portal.sessionInactivityTimeout?(d.close(),d._portal.connectionSuspended(function(){d.connect()})):d._send({jsonrpc:"2.0",method:"keepAlive",params:[]}))},d._portal.sessionRefreshInterval)};this._ws.onclose=function(a){c.debug("OnClose called for WebSocket (reconnect: "+d._connectRequested+").");null!==d._refreshTimer&&(clearInterval(d._refreshTimer),d._refreshTimer=null);d._connectRequested&&(d._connectionLost||(d._portal.connectionLost(),d._connectionLost=
!0),d._initiateReconnect())};this._ws.onmessage=function(a){try{var b=JSON.parse(a.data)}catch(l){c.error(l.name+":"+l.lineNumber+":"+l.columnNumber+": "+l.message+". Data: ");c.error(a.data);return}d._recvQueue.push(b);1===d._recvQueue.length&&d._handleMessages()}};e.prototype.connect=function(){this._connectRequested=!0;var a=this;$(window).on("beforeunload",function(){c.debug("Closing WebSocket due to page unload");a._connectRequested=!1;a._ws.close()});this._connect()};e.prototype.close=function(){this._portalSessionId&&
this._send({jsonrpc:"2.0",method:"disconnect",params:[this._portalSessionId]});this._connectRequested=!1;this._ws.close()};e.prototype._initiateReconnect=function(){if(!this._reconnectTimer){var a=this;this._reconnectTimer=setTimeout(function(){a._reconnectTimer=null;a._connect()},1E3)}};e.prototype._drainSendQueue=function(){for(;this._ws.readyState==this._ws.OPEN&&0<this._sendQueue.length;){var a=this._sendQueue[0];try{this._ws.send(a),this._sendQueue.shift()}catch(d){c.warn(d)}}};e.prototype._send=
function(a){this._sendQueue.push(JSON.stringify(a));this._drainSendQueue()};e.prototype.send=function(a){this._inactivity=0;this._send(a)};e.prototype.addMessageHandler=function(a,d){this._messageHandlers[a]=d};e.prototype._handlerLog=function(a){this._debugHandler&&c.debug(a())};e.prototype._handleMessages=function(){for(;;){if(0<this._recvQueueLocks){this._handlerLog(function(){return"Handler receive queue locked."});break}if(0===this._recvQueue.length){this._handlerLog(function(){return"Handler receive queue empty."});
break}var a=this._recvQueue.shift(),d=this._messageHandlers[a.method];d?a.hasOwnProperty("params")?(this._handlerLog(function(){return"Handling: "+a.method+"["+a.params+"]"}),d.apply(null,[].concat($jscomp.arrayFromIterable(a.params)))):(this._handlerLog(function(){return"Handling: "+a.method}),d()):c.error("No handler for invoked method "+a.method)}};e.prototype.lockMessageReceiver=function(){this._recvQueueLocks+=1;if(this._debugHandler)try{throw Error("Lock");}catch(a){c.debug("Locking receiver:\n"+
a.stack)}};e.prototype.unlockMessageReceiver=function(){--this._recvQueueLocks;if(this._debugHandler)try{throw Error("Unlock");}catch(a){c.debug("Unlocking receiver:\n"+a.stack)}0==this._recvQueueLocks&&this._handleMessages()};var h=function(a){this._portal=a;this._debugLoading=!1;this._providedScriptResources=new Set;this._unresolvedScriptRequests=[];this._loadingScripts=new Set;this._unlockMessageQueueAfterLoad=!1;this._loadingTimeoutHandler=null;this._scriptResourceSnippet=0};h.prototype._loadingMsg=
function(a){this._debugLoading&&c.debug(moment().format("HH:mm:ss.SSS")+": "+a())};h.prototype._mayBeStartScriptLoad=function(a){var d=this;d._debugLoading&&(a.id=0<a.provides.length?a.provides.join("/"):a.uri?a.uri:"Snippet_"+ ++this._scriptResourceSnippet);var b=a.requires;a.requires=[];b.forEach(function(b){d._providedScriptResources.has(b)||a.requires.push(b)});0<a.requires.length?(d._loadingMsg(function(){return"Not (yet) loading: "+a.id+", missing: "+a.requires.join(", ")}),d._unresolvedScriptRequests.push(a)):
this._startScriptLoad(a)};h.prototype._startScriptLoad=function(a){var d=this,b=$("head").get()[0],e=document.createElement("script");a.id&&e.setAttribute("id",a.id);a.type&&e.setAttribute("type",a.type);a.source?(e.text=a.source,b.appendChild(e),d._scriptResourceLoaded(a)):(e.src=a.uri,e.addEventListener("load",function(b){d._loadingScripts.delete(e.src);d._scriptResourceLoaded(a)}),d._loadingMsg(function(){return"Loading: "+a.id}),d._loadingScripts.add(e.src),null===this._loadingTimeoutHandler&&
(this._loadingTimeoutHandler=setInterval(function(){c.warn("Still waiting for: "+Array.from(d._loadingScripts).join(", "))},5E3)),b.appendChild(e))};h.prototype._scriptResourceLoaded=function(a){var d=this;this._loadingMsg(function(){return"Loaded: "+a.id});a.provides.forEach(function(a){d._providedScriptResources.add(a)});var b=new Set(a.provides),c=d._unresolvedScriptRequests;d._unresolvedScriptRequests=[];c.forEach(function(a){var f=a.requires;a.requires=[];f.forEach(function(d){b.has(d)||a.requires.push(d)});
0==a.requires.length?d._startScriptLoad(a):d._unresolvedScriptRequests.push(a)});0==d._loadingScripts.size&&(null!==this._loadingTimeoutHandler&&(clearInterval(this._loadingTimeoutHandler),this._loadingTimeoutHandler=null),d._unlockMessageQueueAfterLoad&&(d._loadingMsg(function(){return"All loaded, unlocking message queue."}),d._portal.unlockMessageQueue()))};h.prototype.addPageResources=function(a,d,b){for(var f in a){var c=a[f];0===$("head > link[href='"+c+"']").length&&$("head link[rel='stylesheet']:last").after("<link rel='stylesheet' href='"+
c+"'>")}d&&(a=$("style"),a.text(d),$("head link[rel='stylesheet']:last").after(a));for(var e in b)d=b[e],d.uri&&0<$("head > script[src='"+d.uri+"']").length||this._mayBeStartScriptLoad(d)};h.prototype.lockWhileLoading=function(){0<this._loadingScripts.size&&!this._unlockMessageQueueAfterLoad&&(this._portal.lockMessageQueue(),this._loadingMsg(function(){return"Locking message queue until all loaded."}),this._unlockMessageQueueAfterLoad=!0)};JGPortal.Renderer=function(){};JGPortal.Renderer.prototype.init=
function(){};JGPortal.Renderer.prototype.connectionLost=function(){c.warn("Not implemented!")};JGPortal.Renderer.prototype.connectionRestored=function(){c.warn("Not implemented!")};JGPortal.Renderer.prototype.connectionSuspended=function(a){c.warn("Not implemented!")};JGPortal.Renderer.prototype.portalConfigured=function(){c.warn("Not implemented!")};JGPortal.Renderer.prototype.addPortletType=function(a,d,b){c.warn("Not implemented!")};JGPortal.Renderer.prototype.lastPortalLayout=function(a,d,b){c.warn("Not implemented!")};
JGPortal.Renderer.prototype.updatePortletPreview=function(a,d,b,e,l){c.warn("Not implemented!")};JGPortal.Renderer.prototype.updatePortletView=function(a,d,b,e,l){c.warn("Not implemented!")};JGPortal.Renderer.prototype.portletRemoved=function(a){c.warn("Not implemented!")};JGPortal.Renderer.prototype.updatePortletTitle=function(a,d){c.warn("Not implemented!")};JGPortal.Renderer.prototype.updatePortletModes=function(a,d){c.warn("Not implemented!")};JGPortal.Renderer.prototype.showEditDialog=function(a,
d,b){c.warn("Not implemented!")};JGPortal.Renderer.prototype.notification=function(a,d){c.warn("Not implemented!")};JGPortal.Renderer.prototype.sendSetLocale=function(a){k.send("setLocale",a)};JGPortal.Renderer.prototype.sendRenderPortlet=function(a,d){k.send("renderPortlet",a,d)};JGPortal.Renderer.prototype.sendAddPortlet=function(a,d){k.send("addPortlet",a,d)};JGPortal.Renderer.prototype.sendDeletePortlet=function(a){k.send("deletePortlet",a)};JGPortal.Renderer.prototype.sendLayout=function(a,d,
b){k.isConfigured&&k.send("portalLayout",a,d,b)};JGPortal.Renderer.prototype.send=function(a,b){for(var d=[],c=1;c<arguments.length;++c)d[c-1]=arguments[c];k.send.apply(k,[].concat([a],$jscomp.arrayFromIterable(d)))};JGPortal.Renderer.prototype.findPortletRepresentations=function(a){return $(".portlet[data-portlet-id='"+a+"']").get()};JGPortal.Renderer.prototype.findPortletPreview=function(a){a=$(".portlet-preview[data-portlet-id='"+a+"']");return 1===a.length?$(a[0]):null};JGPortal.Renderer.prototype.findPreviewIds=
function(){return $(".portlet-preview[data-portlet-id]").map(function(){return $(this).attr("data-portlet-id")}).get()};JGPortal.Renderer.prototype.findPortletView=function(a){a=$(".portlet-view[data-portlet-id='"+a+"']");return 1===a.length?$(a[0]):null};JGPortal.Renderer.prototype.findViewIds=function(){return $(".portlet-view[data-portlet-id]").map(function(){return $(this).attr("data-portlet-id")}).get()};JGPortal.Renderer.prototype.formatMemorySize=function(a,b,f){void 0===f&&(f=b,b=-1);for(var d=
0;1E4<a&&5>d;)a/=1024,d+=1;var c="PiB";switch(d){case 0:c="B";break;case 1:c="kiB";break;case 2:c="MiB";break;case 3:c="GiB";break;case 4:c="TiB"}return 0<=b?(new Intl.NumberFormat(f,{minimumFractionDigits:b,maximumFractionDigits:b})).format(a)+" "+c:(new Intl.NumberFormat(f)).format(a)+" "+c};var g=function(){var a=this;this._isConfigured=!1;this._sessionInactivityTimeout=this._sessionRefreshInterval=0;this._renderer=null;this._webSocket=new e(this);this._portletFunctionRegistry={};this._previewTemplate=
$('<section class="portlet portlet-preview"></section>');this._viewTemplate=$('<article class="portlet portlet-view"></article>');this._editTemplate=$('<div class="portlet portlet-edit"></div>');this._resourceManager=new h(this);this._webSocket.addMessageHandler("addPageResources",function(b,f,c){a._resourceManager.addPageResources(b,f,c)});this._webSocket.addMessageHandler("addPortletType",function(b,f,c,e,g){a._resourceManager.addPageResources(c,null,e);a._renderer.addPortletType(b,f,g)});this._webSocket.addMessageHandler("lastPortalLayout",
function(b,f,c){a._resourceManager.lockWhileLoading();a._renderer.lastPortalLayout(b,f,c)});this._webSocket.addMessageHandler("notifyPortletView",function(b,f,c,e){(b=a._portletFunctionRegistry[b])&&(c=b[c])&&c(f,e)});this._webSocket.addMessageHandler("portalConfigured",function(){a._isConfigured=!0;a._renderer.portalConfigured()});this._webSocket.addMessageHandler("updatePortlet",function(b,f,c,e,g){"Preview"===f||"DeleteablePreview"===f?a._updatePreview(b,c,f,e,g):"View"===f?a._updateView(b,c,e,
g):"Edit"===f&&(f=a._editTemplate.clone(),f.attr("data-portlet-id",b),a._renderer.showEditDialog(f,c,e),a._execOnLoad(f))});this._webSocket.addMessageHandler("deletePortlet",function(b){b=a._renderer.findPortletRepresentations(b);0<b.length&&a._renderer.portletRemoved(b)});this._webSocket.addMessageHandler("displayNotification",function(b,f){a._renderer.notification(b,f)});this._webSocket.addMessageHandler("retrieveLocalData",function(b){var d=[];try{for(var e=0;e<localStorage.length;e++){var g=localStorage.key(e);
if(!b.endsWith("/")){if(g!==b)continue}else if(!g.startsWith(b))continue;var h=localStorage.getItem(g);d.push([g,h])}}catch(n){c.error(n)}a._webSocket.send({jsonrpc:"2.0",method:"retrievedLocalData",params:[d]})});this._webSocket.addMessageHandler("storeLocalData",function(a){try{for(var b in a){var d=a[b];"u"===d[0]?localStorage.setItem(d[1],d[2]):"d"===d[0]&&localStorage.removeItem(d[1])}}catch(l){c.error(l)}});this._webSocket.addMessageHandler("reload",function(){window.location.reload(!0)})};
g.prototype.init=function(a,b,f,c){sessionStorage.setItem("org.jgrapes.portal.base.sessionId",a);this._sessionRefreshInterval=b;this._sessionInactivityTimeout=f;this._renderer=c;JGPortal.renderer=c;this._webSocket.connect();this._renderer.init();this.send("portalReady")};g.prototype.connectionLost=function(){this._renderer.connectionLost()};g.prototype.connectionRestored=function(){this._renderer.connectionRestored()};g.prototype.connectionSuspended=function(a){this._renderer.connectionSuspended(a)};
g.prototype.lockMessageQueue=function(){this._webSocket.lockMessageReceiver()};g.prototype.unlockMessageQueue=function(){this._webSocket.unlockMessageReceiver()};g.prototype._execOnLoad=function(a){a.find("[data-on-load]").each(function(){for(var a=$(this).data("onLoad").split("."),b=window;b&&0<a.length;)b=b[a.shift()];b&&"function"===typeof b&&b.apply(null,[$(this)])})};g.prototype._updatePreview=function(a,b,c,e,g){var d=this._renderer.findPortletPreview(a),f=!d;f&&(d=this._previewTemplate.clone(),
d.attr("data-portlet-id",a));"DeleteablePreview"===c?d.addClass("portlet-deleteable"):d.removeClass("portlet-deleteable");this._renderer.updatePortletPreview(f,d,b,e,g);this._execOnLoad(d)};g.prototype._updateView=function(a,b,c,e){var d=this._renderer.findPortletView(a),f=!d;f&&(d=this._viewTemplate.clone(),d.attr("data-portlet-id",a));this._renderer.updatePortletView(f,d,b,c,e);this._execOnLoad(d)};g.prototype.registerPortletMethod=function(a,b,c){var d=this._portletFunctionRegistry[a];d||(d={},
this._portletFunctionRegistry[a]=d);d[b]=c};g.prototype.send=function(a,b){for(var d=[],c=1;c<arguments.length;++c)d[c-1]=arguments[c];0<d.length?this._webSocket.send({jsonrpc:"2.0",method:a,params:d}):this._webSocket.send({jsonrpc:"2.0",method:a})};g.prototype.notifyPortletModel=function(a,b,c){for(var d=[],f=2;f<arguments.length;++f)d[f-2]=arguments[f];void 0===d?k.send("notifyPortletModel",a,b):k.send("notifyPortletModel",a,b,d)};g.prototype.generateUUID=function(){var a=crypto.getRandomValues(new Uint8Array(16));
a[6]=a[6]&15|64;a[8]=a[8]&63|128;return a[0].toString(16)+a[1].toString(16)+a[2].toString(16)+a[3].toString(16)+"-"+a[4].toString(16)+a[5].toString(16)+"-"+a[6].toString(16)+a[7].toString(16)+"-"+a[8].toString(16)+a[9].toString(16)+"-"+a[0].toString(10)+a[0].toString(11)+a[0].toString(12)+a[0].toString(13)+a[0].toString(14)+a[0].toString(15)};$jscomp.global.Object.defineProperties(g.prototype,{isConfigured:{configurable:!0,enumerable:!0,get:function(){return this._isConfigured}},sessionRefreshInterval:{configurable:!0,
enumerable:!0,get:function(){return this._sessionRefreshInterval}},sessionInactivityTimeout:{configurable:!0,enumerable:!0,get:function(){return this._sessionInactivityTimeout}},renderer:{configurable:!0,enumerable:!0,get:function(){return this._renderer}}});var k=new g;JGPortal.init=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];k.init.apply(k,[].concat($jscomp.arrayFromIterable(b)))};JGPortal.registerPortletMethod=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-
0]=arguments[c];k.registerPortletMethod.apply(k,[].concat($jscomp.arrayFromIterable(b)))};JGPortal.notifyPortletModel=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];return k.notifyPortletModel.apply(k,[].concat($jscomp.arrayFromIterable(b)))};JGPortal.lockMessageQueue=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];k.lockMessageQueue.apply(k,[].concat($jscomp.arrayFromIterable(b)))};JGPortal.unlockMessageQueue=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-
0]=arguments[c];k.unlockMessageQueue.apply(k,[].concat($jscomp.arrayFromIterable(b)))};JGPortal.findPortletPreview=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];return k.renderer.findPortletPreview.apply(k.renderer,[].concat($jscomp.arrayFromIterable(b)))};JGPortal.findPortletView=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];return k.renderer.findPortletView.apply(k.renderer,[].concat($jscomp.arrayFromIterable(b)))};JGPortal.createIfMissing=function(a,
b,c){var d=a.data(b);if(d)return d;d=c();a.data(b,d);return d};b.prototype.label=function(a){return this.labelsByKey[a]};b.prototype.sortOrder=function(a){return this.sortOrders[a]};b.prototype.sortBy=function(a){this.sortKey!=a?this.sortKey=a:this.sortOrders[a]*=-1};b.prototype.sortedByAsc=function(a){return this.sortKey==a&&1==this.sortOrders[a]};b.prototype.sortedByDesc=function(a){return this.sortKey==a&&-1==this.sortOrders[a]};b.prototype.filter=function(a){var b=this.filterKey&&this.filterKey.toLowerCase();
b&&(a=a.filter(function(a){return Object.values(a).some(function(a){return-1<String(a).toLowerCase().indexOf(b)})}));if(this.sortKey){var c=this.sortKey,e=this.sortOrders[c];a=a.sort(function(a,b){a=a[c];b=b[c];return(a===b?0:a>b?1:-1)*e})}return a};b.prototype.filterBy=function(a){this.filterKey=a};b.prototype.updateFilter=function(a){this.filterKey=$(a.target).val()};b.prototype.clearFilter=function(a){$(a.target).closest("form").find("input").val("");this.filterKey=""};b.prototype.breakBeforeDots=
function(a){return String(a).replace(/\./g,"&#x200b;.")};JGPortal.TableController=b})();
//# sourceMappingURL=functions.min.js.map
