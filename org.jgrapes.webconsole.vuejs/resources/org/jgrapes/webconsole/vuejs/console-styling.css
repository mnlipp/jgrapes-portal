/*
 * JGrapes Event Driven Framework
 * Copyright (C) 2019  Michael N. Lipp
 *
 * This program is free software; you can redistribute it and/or modify it 
 * under the terms of the GNU Affero General Public License as published by 
 * the Free Software Foundation; either version 3 of the License, or 
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful, but 
 * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 * or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License 
 * for more details.
 *
 * You should have received a copy of the GNU Affero General Public License along 
 * with this program; if not, see <http://www.gnu.org/licenses/>.
 */

/* # Configurable globals */

:root {
  --blue: 0, 123, 255;
  --indigo: 102, 16, 242;
  --purple: 111, 66, 193;
  --pink: 232, 62, 140;
  --red: 220, 53, 69;
  --orange: 253, 126, 20;
  --yellow: 255, 193, 77;
  --green: 40, 167, 69;
  --teal: 32, 201, 151;
  --cyan: 23, 162, 184;
  --white: 255, 255, 255;
  --gray: 108, 117, 125;
  --gray-dark: 52, 58, 64;

  --primary: 0, 123, 255;
  --secondary: 108, 117, 125;
  
  --success: 40, 167, 69;
  --info: 23, 162, 184;
  --warning: 255, 193, 7;
  --danger: 220, 53, 69;

  /* Text background and foreground colors used in body. */  
  --body-background: 255, 255, 255;
  --body-color: 33, 37, 41;

  /* To be used for light background, stands out lightly from body-background. */  
  --light: 248, 249, 250;
  /* To be used for dark background, needs different foreground color. */
  --dark: 52, 58, 64;
  
  /* Background and border color for panels. Must be usable with 
   * "default" foreground color (body-color). */
  --panel-background: 248, 249, 250;
  --panel-border: 223, 223, 223;
  
  --hover-darkening: rgba(0, 0, 0, 0.1);
  
  --font-family-sans-serif: -apple-system, BlinkMacSystemFont, "Segoe UI", 
        Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", 
        "Segoe UI Emoji", "Segoe UI Symbol";
  --font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, 
        "Liberation Mono", "Courier New", monospace;
}

/* # Console styling */

/* ## Console "Frame" Styling */

body {
    font-family: var(--font-family-sans-serif);
    font-size: 1rem;
    line-height: 1.5;
    color: rgb(var(--body-color));
    background-color: rgb(var(--body-background));
}

body > header {
    background-color: rgb(var(--dark));
    padding: 0.3125rem 1rem;
}

body > header > :first-child {
    font-size: 125%;
    color: rgb(var(--white));
}

body > header > :first-child img {
    vertical-align: middle;
}

body > header > :first-child a {
    color: rgb(var(--white));
    text-decoration: none;
}

body > header .pulldown-menu > button {
    background-color: inherit;
    color: rgb(var(--white));
    border-width: 0;
    padding: 0 0.5rem;
    -webkit-appearance: none;
    -moz-appearance: none;
}

body > main {
    margin: 0.5rem;    
}

#consolePanels {
    margin-top: 1rem;
}

#consolePanels article {
    margin: 1rem;
}

body > footer {
    display: block;
    padding: 0.25rem;
    text-align: center;
}

/* Flow content cannot be put inside a paragraph, but somtimes
 * you want it to have the margins of a paragraph. */
.flow-content--paragraph {
    margin-top: 0;
    margin-bottom: 1rem;
}

/* Spin while loading. */
#loader-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    
}

#loader-overlay div {
    border: 1.5vmin solid rgb(var(--primary));
    border-top-color: #f7f7f700;
    border-radius: 50%;
    width: 10vmin;
    height: 10vmin;
    animation: spin 2s linear infinite;
    margin-left: auto;
    margin-right: auto;
    margin-top: 25vh;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

#notification-area [role="alert"] {
    position: relative;
    padding: .75rem 1.25rem;
    margin-bottom: 1rem;
    border: 1px solid transparent;
    border-radius: .25rem;
}

#notification-area .notification--info {
    color: #31708f;
    background-color: #d9edf7;
    border-color: #bce8f1;
}

#notification-area .notification--info p::before {
    font-family: "Font Awesome 5 Free";
    content: "\f05a";
    display: inline-block;
    font-weight: 900;
    padding-right: 0.5rem;
}

#notification-area .notification--success {
    color: #3c763d;
    background-color: #dff0d8;
    border-color: #d6e9c6;
}

#notification-area .notification--success p::before {
    font-family: "Font Awesome 5 Free";
    content: "\f058";
    display: inline-block;
    font-weight: 900;
    padding-right: 0.5rem;
}

#notification-area .notification--warning {
    color: #8a6d3b;
    background-color: #fcf8e3;
    border-color: #faebcc;
}

#notification-area .notification--warning p::before {
    font-family: "Font Awesome 5 Free";
    content: "\f06a";
    display: inline-block;
    font-weight: 900;
    padding-right: 0.5rem;
}

#notification-area .notification--error {
    color: #a94442;
    background-color: #f2dede;
    border-color: #ebccd1;
}

#notification-area .notification--error p::before {
    font-family: "Font Awesome 5 Free";
    content: "\f057";
    display: inline-block;
    font-weight: 900;
    padding-right: 0.5rem;
}

#notification-area [role="alert"] p {
    margin: 0;
}

#notification-area [role="alert"] button {
    display: inline-block;
    border: none;
    font-size: 1rem;
    padding: 0;
    margin-left: 0.5rem;
    background-color: transparent;
}

#notification-area [role="alert"] button:hover {
    transform: scale(1.25);
}

/* ## JGP Component styling */

/*
 * The jgwc-tablist is considered an implementation of a general tablist
 * as presented in
 * https://www.w3.org/TR/wai-aria-practices/examples/tabs/tabs-2/tabs.html.
 *
 * Hoever, the element with [role=tab] isn't the activating button, because
 * there is also an additional remove button. Therefore, there is role based
 * styling that should work for any tablist following the basic structure
 * and styling for the special case of a jgwc-tablist.
 */

[role=tablist] {
    border-bottom: 1px solid rgb(var(--panel-border));
}

[role=tablist] [role=tab] {
    display: inline-block; /* Puts border at "outline". */
    overflow: hidden; /* Properly clips corners. */
    vertical-align: bottom; /* Undoes bottom edge aligning on the text baseline of the parent. */
    border-top-left-radius: .25rem;
    border-top-right-radius: .25rem;
    border-left: 1px solid rgb(var(--panel-border));
    border-top: 1px solid rgb(var(--panel-border));
    border-right: 1px solid rgb(var(--panel-border));
    border-bottom: 1px solid rgba(0,0,0,0);
    padding: 0;
    margin-left: 0.5rem;
    margin-bottom: -1px;
}

[role=tablist] [role=tab]:hover {
    background-color: var(--hover-darkening);
}

[role=tablist] [aria-selected="true"] {
    border-bottom: 1px solid rgb(var(--body-background));
}

[role=tablist] [aria-selected="false"] button {
    color: rgba(0, 0, 0, 0.6);
}

[role=tablist] button {
    display: inline-block;
    -webkit-appearance: none;
    -moz-appearance: none;
    border: none;
    font-size: 1rem;
    padding: .675rem 1rem;
    background-color: transparent;
}

[role=tablist] button:hover {
    color: rgb(var(--primary));
}

.jgwc-tablist > span button:first-child:-moz-focusring {
    outline-offset: -0.25rem;
}

.jgwc-tablist > span button:not(:first-child) {
    padding-left: 0;
    padding-right: 0;
    position: relative;
    left: -0.25rem;
    bottom: 0.5rem;
    margin-left: -0.25rem;
    color: rgb(var(--primary));
}

.jgwc-tablist > span button:not(:first-child):hover {
    transform: scale(1.25);
}

.jgwc-tablist > span[aria-selected="true"] button:first-child {
    color: inherit;
}

.jgwc-tablist > span[aria-selected="false"] button:not(:first-child) {
    display: none;
}

/*
 * The jgwc-pulldown-menu is considered an implementation of a general pulldown
 * menu as presented in
 * https://www.w3.org/TR/wai-aria-practices/examples/menu-button/menu-button-actions.html.
 *
 * Therefore we use the "general" class that should also apply to pulldown
 * menus defined manually or generated by a different menu implementation.
 */

.pulldown-menu > button:hover {
    transform: scale(1.25);
}

/* Triangle */
.pulldown-menu > button::after {
    display: inline-block;
    width: 0;
    height: 0;
    margin-left: .51em;
    vertical-align: .255em;
    content: "";
    border-top: .3em solid;
    border-right: .3em solid transparent;
    border-bottom: 0;
    border-left: .3em solid transparent;
}

.pulldown-menu > ul {
    margin-top: 15px;
    min-width: 10rem;
    padding: .5rem 0;
    margin: .125rem 0 0;
    background-color: rgb(var(--body-background));
    background-clip: padding-box;
    border: 1px solid rgba(0,0,0,.15);
    border-radius: .25rem;
}

.pulldown-menu > ul button {
    display: inline-block;
    border: none;
    font-size: 1rem;
    padding: .25rem 1.5rem;
    background-color: transparent;
    white-space: nowrap;
    width: 100%;
    text-align: left;
}

.pulldown-menu > ul button:hover {
    color: rgb(var(--primary));
    background-color: var(--hover-darkening);
}


.dialog__backdrop {
    background: rgba(0, 0, 0, 0.3);
}

[role="dialog"] {
    background-color: rgb(var(--body-background));
    border: 1px solid rgb(var(--panel-border));
    border-radius: .25rem;
}

[role="dialog"] > header,
[role="dialog"] > footer {
    padding: 0.5rem 1rem;
}

[role="dialog"] > section {
    padding: 1rem;
}

[role="dialog"] header p,
[role="dialog"] footer p {
    margin: 0;
}

[role="dialog"] header {
    background-color: rgb(var(--panel-background));
    border-bottom: 1px solid rgb(var(--panel-border));
}

[role="dialog"] header p {
    font-size: 125%;
    font-weight: 500;
}

[role="dialog"] footer {
    border-top: 1px solid rgb(var(--panel-border));
}

.jgwc-modal-dialog header button {
    display: inline-block;
    border: none;
    font-size: 1rem;
    padding: 0;
    margin-left: 0.5rem;
    color: rgb(var(--primary));
    background-color: transparent;
}

.jgwc-modal-dialog header button:hover {
    transform: scale(1.25);
}

.jgwc-modal-dialog footer button[type="button"] {
    display: inline-block;
    font-weight: 400;
    color: #fff;
    background-color: #007bff;
    border: 1px solid #007bff;
    border-radius: .25rem;
    text-align: center;
    vertical-align: middle;
    padding: .375rem .75rem;
    font-size: 1rem;
    line-height: 1.5;
    transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;
}

@media (prefers-reduced-motion: reduce) {
    .jgwc-modal-dialog footer button[type="button"] {
        transition: none;
    }
}


/* # Conlet Styling */

/* ## General */

/* ## Conlet Preview Styling */

.conlet-preview {
    border: 1px solid rgb(var(--panel-border));
    border-radius: .25rem;
}

.conlet-preview > header {
    padding: .75rem 1.25rem;
    background-color: rgb(var(--panel-background));
    border-bottom: 1px solid rgb(var(--panel-border));
    line-height: 1.2;
}

.conlet-preview > header > p {
    margin: 0;
}

.conlet-preview > header button {
    display: inline-block;
    border: none;
    font-size: 1rem;
    padding: 0;
    margin-left: 0.5rem;
    color: rgb(var(--primary));
    background-color: transparent;
}

.conlet-preview > header button:hover {
    transform: scale(1.25);
}

.conlet-preview > section {
    padding: 1.25rem;
}

/* ## Conlet Content UI Styles (markup based) */

/* ### Button styling. */

.conlet-content:not(.conlet-content--no-markup-styling) 
    button[type="button"] {
    display: inline-block;
    font-weight: 400;
    color: #fff;
    background-color: #007bff;
    border: 1px solid #007bff;
    border-radius: .25rem;
    text-align: center;
    vertical-align: middle;
    padding: .375rem .75rem;
    font-size: 1rem;
    line-height: 1.5;
    transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;
}

@media (prefers-reduced-motion: reduce) {
    .conlet-content:not(.conlet-content--no-markup-styling) 
        button[type="button"] {
        transition: none;
    }
}

.conlet-content:not(.conlet-content--no-markup-styling) 
    span[role=button] {
    color: rgb(var(--primary));
}

.conlet-content:not(.conlet-content--no-markup-styling) 
    span[role=button]:hover {
    transform: scale(1.25);
}

.conlet-content:not(.conlet-content--no-markup-styling) a {
    color: rgb(var(--primary));
}

.conlet-content:not(.conlet-content--no-markup-styling) a:hover {
    color: rgba(var(--primary), 0.9);
}


/* # UI Styles (markup based) */

/* ## Button Styling */

:not(.form--no-markup-styling) form button {
    display: inline-block;
    font-weight: 400;
    color: #fff;
    background-color: #007bff;
    border: 1px solid #007bff;
    border-radius: .25rem;
    text-align: center;
    vertical-align: middle;
    padding: .375rem .75rem;
    font-size: 1rem;
    line-height: 1.5;
    transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;
}

@media (prefers-reduced-motion: reduce) {
    :not(.form--no-markup-styling) form button {
        transition: none;
    }
}

:not(.form--no-markup-styling) form button:hover {
    color: #fff;
    background-color: #0069d9;
    border-color: #0062cc;
    text-decoration: none;
}

:not(.form--no-markup-styling) form span[role="button"] {
    color: rgb(var(--primary));
}

:not(.form--no-markup-styling) form span[role="button"]:hover {
    color:rgba(var(--primary), 0.9);
}


/* ## Tree grid */

[role="treegrid"] [role="row"] td:first-child {
    pointer-events: none;
}

[role="treegrid"] [role="row"] td:first-child::before {
    pointer-events: all;
    content: "";
    width: 0;
    height: 0;
    display: inline-block;
    vertical-align: middle;
    border-style: solid;
    margin-right: 0.125rem;
}

[role="treegrid"] [role="row"][aria-expanded="false"] td:first-child::before {
    padding-right: 0.375rem;
    border-width: 0.5rem 0 0.5rem 0.625rem;
    border-color: transparent transparent transparent rgb(var(--primary));
}

[role="treegrid"] [role="row"][aria-expanded="false"] td:first-child:hover::before {
    transform: scale(1.25);
    position: relative;
    left: 0.1rem;
}

[role="treegrid"] [role="row"][aria-expanded="true"] td:first-child::before {
    border-width: 0.625rem 0.5rem 0 0.5rem;
    border-color: rgb(var(--primary)) transparent transparent transparent;
}

[role="treegrid"] [role="row"][aria-expanded="true"] td:first-child:hover::before {
    position: relative;
    transform: scale(1.25);
}


/* ## Form styles */

/* ### Plain form styles */

:not(.form--no-markup-styling) form fieldset {
    min-width: 0;
    padding: 0;
    margin: 0;
    border: 0;
}

:not(.form--no-markup-styling) form fieldset ul {
    margin: 0;
    padding: 0;
}

:not(.form--no-markup-styling) form label input,
:not(.form--no-markup-styling) form label select,
:not(.form--no-markup-styling) form label textarea {
    color: #495057;
    line-height: 1.5;
    background-color: #fff;
    background-clip: padding-box;
    padding: .375rem .75rem;
}

:not(.form--no-markup-styling) form label:not(.form__label--panel) input,
:not(.form--no-markup-styling) form label:not(.form__label--panel) select,
:not(.form--no-markup-styling) form label:not(.form__label--panel) textarea {
    border: 1px solid #ced4da;
    border-radius: .25rem;
    transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;
}

@media (prefers-reduced-motion: reduce) {
    :not(.form--no-markup-styling) form label * {
        transition: none;
    }
}

:not(.form--no-markup-styling) form input:focus,
:not(.form--no-markup-styling) form textarea:focus,
:not(.form--no-markup-styling) form select:focus {
    border-color: #80bdff;
    outline: 0;
    box-shadow: 0 0 0 .2rem rgba(0,123,255,.25);
}

:not(.form--no-markup-styling) form 
    fieldset.form__fieldset--horizontal > span > :not(legend) {
    margin-left: .25em;
}

:not(.form--no-markup-styling) form 
    label.form__label--full-width > :nth-child(1) {
    margin-right: .25em;
}

/* ### Panel form styles */

:not(.form--no-markup-styling) form 
    label.form__label--panel > * {
    line-height: 1.5;
    padding: .375rem .75rem;
    border-width: 1px;
    border-style: solid;
    border-color: #ced4da;
}

:not(.form--no-markup-styling) form 
    label.form__label--panel:not(.form__label--top-aligned) > :not(:last-child) {
    margin-right: -1px;
}

:not(.form--no-markup-styling) form 
    label.form__label--panel * {
    margin-top: 0;
    margin-bottom: 0;
}

:not(.form--no-markup-styling) form 
    label.form__label--panel > :first-child {
    background-color: #e9ecef;
}

:not(.form--no-markup-styling) form 
    label.form__label--panel:not(.form__label--top-aligned) > :first-child {
    border-top-left-radius: .25rem;  
    border-bottom-left-radius: .25rem;  
}

:not(.form--no-markup-styling) form 
    label.form__label--panel:not(.form__label--top-aligned) > :last-child {
    border-top-right-radius: .25rem;  
    border-bottom-right-radius: .25rem;  
}

:not(.form--no-markup-styling) form 
    label.form__label--panel select {
    height: 100%;
    background: url("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%204%205'%3e%3cpath%20fill='%23343a40'%20d='M2%200L0%202h4zm0%205L0%203h4z'/%3e%3c/svg%3e") no-repeat right .75rem center/8px 10px;
    background-color: rgba(0, 0, 0, 0);
    padding: .375rem .75rem;
    -webkit-appearance: none;
    -moz-appearance: none;
}

:not(.form--no-markup-styling) form 
    label.form__label--panel.form__label--top-aligned > :not(:last-child) {
    margin-bottom: -1px;
}

:not(.form--no-markup-styling) form 
    label.form__label--panel.form__label--top-aligned > :first-child {
    border-top-left-radius: .25rem;  
    border-top-right-radius: .25rem;  
}

:not(.form--no-markup-styling) form 
    label.form__label--panel.form__label--top-aligned > :last-child {
    border-bottom-left-radius: .25rem;  
    border-bottom-right-radius: .25rem;  
}

:not(.form--no-markup-styling) form 
    fieldset.form__fieldset--panel:not(.form__fieldset--horizontal) > * {
    line-height: 1.5;
    padding: .375rem .75rem;
    border-width: 1px;
    border-style: solid;
    border-color: #ced4da;
}

:not(.form--no-markup-styling) form fieldset.form__fieldset--panel * {
    margin-top: 0;
    margin-bottom: 0;
}

:not(.form--no-markup-styling) form fieldset.form__fieldset--panel legend {
    line-height: 1.5;
    padding: .375rem .75rem;
    background-color: #e9ecef;
}

:not(.form--no-markup-styling) form 
    fieldset.form__fieldset--panel:not(.form__fieldset--horizontal) > :not(:last-child) {
    margin-bottom: -1px;
}

:not(.form--no-markup-styling) form 
    fieldset.form__fieldset--panel:not(.form__fieldset--horizontal) > :first-child {
    border-top-left-radius: .25rem;  
    border-top-right-radius: .25rem;  
}

:not(.form--no-markup-styling) form 
    fieldset.form__fieldset--panel:not(.form__fieldset--horizontal) > :last-child {
    border-bottom-left-radius: .25rem;  
    border-bottom-right-radius: .25rem;  
}

:not(.form--no-markup-styling) form 
    fieldset.form__fieldset--panel.form__fieldset--horizontal > span > :not(legend) {
    margin-left: -1px;
}

:not(.form--no-markup-styling) form 
    fieldset.form__fieldset--panel.form__fieldset--horizontal > span > * {
    line-height: 1.5;
    padding: .375rem .75rem;
    border-width: 1px;
    border-style: solid;
    border-color: #ced4da;
}

:not(.form--no-markup-styling) form 
    fieldset.form__fieldset--panel.form__fieldset--horizontal > span > :first-child {
    border-top-left-radius: .25rem;  
    border-bottom-left-radius: .25rem;  
}

:not(.form--no-markup-styling) form 
    fieldset.form__fieldset--panel.form__fieldset--horizontal > span > :last-child {
    border-top-right-radius: .25rem;  
    border-bottom-right-radius: .25rem;  
}
