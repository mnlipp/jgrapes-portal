<!doctype html>

<html lang="${locale.toLanguageTag()}">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Console -->
<link rel="icon" href="${renderSupport.consoleResource('favicon.ico')}">
<title>${_("consoleTitle")}</title>

<!-- CSS -->
<link rel="stylesheet" 
  href="${renderSupport.consoleResource('lib/normalize.css')}">
<link rel="stylesheet"
  href="${renderSupport.pageResource('gridstack/gridstack' + minifiedExtension + '.css')}" />
<link rel="stylesheet" 
  href="${renderSupport.pageResource('jgwc-vue-components/jgwc-components' + minifiedExtension + '.css')}">
<!-- Console -->
<link rel="stylesheet"
  href="${renderSupport.pageResource('fontawesome-free/css/all' + minifiedExtension + '.css')}" />
<link rel="stylesheet"
  href="${renderSupport.consoleBaseResource('console' + minifiedExtension + '.css')}" />
<link rel="stylesheet"
  href="${renderSupport.consoleResource('console-layout' + minifiedExtension + '.css')}" />
<link rel="stylesheet"
  href="${renderSupport.consoleResource('console-styling' + minifiedExtension + '.css')}" />

<!-- Scripts(s) -->
<script data-jgwc-provides="jquery"
  src="${renderSupport.pageResource('jquery/jquery' + minifiedExtension + '.js')}"></script>
<script data-jgwc-provides="moment, moment-with-locales"
  src="${renderSupport.pageResource('moment/moment-with-locales' + minifiedExtension + '.js')}"></script>
<!-- Gridstack and prerequisites Lodash and JQueryUI () -->
<script data-jgwc-provides="lodash"
  src="${renderSupport.pageResource('lodash/lodash' + minifiedExtension + '.js')}"></script>
<script data-jgwc-provides="jquery-ui"
  src="${renderSupport.pageResource('jquery-ui/jquery-ui' + minifiedExtension + '.js')}"></script>
<script data-jgwc-provides="gridstack"
  src="${renderSupport.pageResource('gridstack/gridstack.js')}"></script>
<script data-jgwc-provides="gridstack.jQueryUI"
  src="${renderSupport.pageResource('gridstack/gridstack.jQueryUI.js')}"></script>
<script data-jgwc-provides="jquery-ui.touch-punch"
  src="${renderSupport.pageResource('jquery-ui-touch-punch/jquery.ui.touch-punch' + minifiedExtension + '.js')}"></script>
<!-- More... -->
</head>

<body id="page-top" class="index console-vuejs">

  <#include "console-header.ftl.html">

  <main role="main">

  <div class="consoleVue">
    <jgwc-tablist id="consoleTabs"></jgwc-tablist>
  </div>
  <div id="consolePanels">
    <section id="consoleOverviewPanel" hidden>
      <div id="consolePreviews" class="grid-stack" role="grid">
      </div>
    </section>
  </div>
  
  </main>

  <!-- Footer -->
  <#include "console-footer.ftl.html">

  <!-- Loader -->
  <div id="loader-overlay">
    <div></div>
  </div> 

  <!-- Notification area -->
  <div id="notification-area">
  </div>

<script type="module">
import Vue from "${renderSupport.pageResource('vue/vue.esm.browser.js')}";
import Vuex from "${renderSupport.pageResource('vuex/vuex.esm.browser.js')}";
import "${renderSupport.pageResource('jgwc-vue-components/jgwc-components.js')}";
import JGConsole from "${renderSupport.consoleBaseResource('jgconsole.js')}";
import VueJsConsole from "${renderSupport.consoleResource('vuejsconsole.js')}";

Vue.use(Vuex);
Vue.prototype.$window = window;

const localeMenuitems = [
  // <#list supportedLanguages as l>
  ['${l.label}', '${l.locale.toLanguageTag()}'],
  // </#list>
];

const consoleMessages = {
    // <#list supportedLanguages as l>
    '${l.locale.toLanguageTag()}': {
        // <#list l.l10nBundle.keys as key>
        '${key}': '${l.l10nBundle.getString(key)}',
        // </#list>
    },
    // </#list>    
};

const renderer = new VueJsConsole.Renderer(localeMenuitems, consoleMessages);

JGConsole.init(
    "${consoleSessionId}", parseInt('${consoleSessionRefreshInterval?c}'), 
    parseInt('${consoleSessionInactivityTimeout?c}'), renderer);

</script>
 
</body>
</html>