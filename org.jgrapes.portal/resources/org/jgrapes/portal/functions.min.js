var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,e,b){a!=Array.prototype&&a!=Object.prototype&&(a[e]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var e=0;return $jscomp.iteratorPrototype(function(){return e<a.length?{done:!1,value:a[e++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var e=a[Symbol.iterator];return e?e.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var e,b=[];!(e=a.next()).done;)b.push(e.value);return b};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.checkStringArgs=function(a,e,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};
$jscomp.polyfill=function(a,e,b,c){if(e){b=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var d=a[c];d in b||(b[d]={});b=b[d]}a=a[a.length-1];c=b[a];e=e(c);e!=c&&null!=e&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:e})}};
$jscomp.polyfill("String.prototype.endsWith",function(a){return a?a:function(a,b){var c=$jscomp.checkStringArgs(this,a,"endsWith");a+="";void 0===b&&(b=c.length);b=Math.max(0,Math.min(b|0,c.length));for(var d=a.length;0<d&&0<b;)if(c[--b]!=a[--d])return!1;return 0>=d}},"es6","es3");$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},e=Object.create(new $jscomp.global.Proxy(a,{get:function(b,c,d){return b==a&&"q"==c&&d==e}}));return!0===e.q}catch(b){return!1}};
$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.owns=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)};
$jscomp.polyfill("WeakMap",function(a){function e(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),c=Object.seal({}),d=new a([[b,2],[c,3]]);if(2!=d.get(b)||3!=d.get(c))return!1;d.delete(b);d.set(c,4);return!d.has(b)&&4==d.get(c)}catch(D){return!1}}function b(a){$jscomp.owns(a,d)||$jscomp.defineProperty(a,d,{value:{}})}function c(a){var c=Object[a];c&&(Object[a]=function(a){b(a);return c(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(e())return a;
var d="$jscomp_hidden_"+Math.random();c("freeze");c("preventExtensions");c("seal");var m=0,g=function(a){this.id_=(m+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};g.prototype.set=function(a,c){b(a);if(!$jscomp.owns(a,d))throw Error("WeakMap key fail: "+a);a[d][this.id_]=c;return this};g.prototype.get=function(a){return $jscomp.owns(a,d)?a[d][this.id_]:void 0};g.prototype.has=
function(a){return $jscomp.owns(a,d)&&$jscomp.owns(a[d],this.id_)};g.prototype.delete=function(a){return $jscomp.owns(a,d)&&$jscomp.owns(a[d],this.id_)?delete a[d][this.id_]:!1};return g},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function e(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),c=new a($jscomp.makeIterator([[b,"s"]]));if("s"!=c.get(b)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var d=c.entries(),e=d.next();if(e.done||e.value[0]!=b||"s"!=e.value[1])return!1;e=d.next();return e.done||4!=e.value[0].x||"t"!=e.value[1]||!d.next().done?!1:!0}catch(k){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(e())return a;$jscomp.initSymbol();$jscomp.initSymbolIterator();var b=new WeakMap,c=function(a){this.data_={};this.head_=g();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};c.prototype.set=function(a,b){var c=d(this,a);c.list||(c.list=this.data_[c.id]=[]);c.entry?c.entry.value=b:(c.entry={next:this.head_,previous:this.head_.previous,head:this.head_,
key:a,value:b},c.list.push(c.entry),this.head_.previous.next=c.entry,this.head_.previous=c.entry,this.size++);return this};c.prototype.delete=function(a){a=d(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};c.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=g();this.size=0};c.prototype.has=function(a){return!!d(this,a).entry};
c.prototype.get=function(a){return(a=d(this,a).entry)&&a.value};c.prototype.entries=function(){return m(this,function(a){return[a.key,a.value]})};c.prototype.keys=function(){return m(this,function(a){return a.key})};c.prototype.values=function(){return m(this,function(a){return a.value})};c.prototype.forEach=function(a,b){for(var c=this.entries(),d;!(d=c.next()).done;)d=d.value,a.call(b,d[1],d[0],this)};c.prototype[Symbol.iterator]=c.prototype.entries;var d=function(a,c){var d=c&&typeof c;"object"==
d||"function"==d?b.has(c)?d=b.get(c):(d=""+ ++q,b.set(c,d)):d="p_"+c;var e=a.data_[d];if(e&&$jscomp.owns(a.data_,d))for(a=0;a<e.length;a++){var g=e[a];if(c!==c&&g.key!==g.key||c===g.key)return{id:d,list:e,index:a,entry:g}}return{id:d,list:e,index:-1,entry:void 0}},m=function(a,c){var b=a.head_;return $jscomp.iteratorPrototype(function(){if(b){for(;b.head!=a.head_;)b=b.previous;for(;b.next!=b.head;)return b=b.next,{done:!1,value:c(b)};b=null}return{done:!0,value:void 0}})},g=function(){var a={};return a.previous=
a.next=a.head=a},q=0;return c},"es6","es3");
$jscomp.polyfill("Set",function(a){function e(){if($jscomp.ASSUME_NO_NATIVE_SET||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var c=Object.seal({x:4}),b=new a($jscomp.makeIterator([c]));if(!b.has(c)||1!=b.size||b.add(c)!=b||1!=b.size||b.add({x:4})!=b||2!=b.size)return!1;var e=b.entries(),g=e.next();if(g.done||g.value[0]!=c||g.value[1]!=c)return!1;g=e.next();return g.done||g.value[0]==c||4!=g.value[0].x||g.value[1]!=g.value[0]?!1:e.next().done}catch(q){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(e())return a;$jscomp.initSymbol();$jscomp.initSymbolIterator();var b=function(a){this.map_=new Map;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)this.add(b.value)}this.size=this.map_.size};b.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};b.prototype.delete=function(a){a=this.map_.delete(a);this.size=this.map_.size;return a};b.prototype.clear=function(){this.map_.clear();
this.size=0};b.prototype.has=function(a){return this.map_.has(a)};b.prototype.entries=function(){return this.map_.entries()};b.prototype.values=function(){return this.map_.values()};b.prototype.keys=b.prototype.values;b.prototype[Symbol.iterator]=b.prototype.values;b.prototype.forEach=function(a,b){var c=this;this.map_.forEach(function(e){return a.call(b,e,e,c)})};return b},"es6","es3");
$jscomp.findInternal=function(a,e,b){a instanceof String&&(a=String(a));for(var c=a.length,d=0;d<c;d++){var m=a[d];if(e.call(b,m,d,a))return{i:d,v:m}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,b){var c=this;c instanceof String&&(c=String(c));var d=c.length;for(b=b||0;b<d;b++)if(c[b]==a||Object.is(c[b],a))return!0;return!1}},"es7","es3");$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,b){var c=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var d=c.length,e=a.length;b=Math.max(0,Math.min(b|0,c.length));for(var g=0;g<e&&b<d;)if(c[b++]!=a[g++])return!1;return g>=e}},"es6","es3");var JGPortal={};
(function(){function a(a){var f=a.requires;a.requires=[];f.forEach(function(f){F.has(f)||a.requires.push(f)});0<a.requires.length?r.push(a):e(a)}function e(a){var f=$("head").get()[0],c=document.createElement("script");a.source?(c.text=a.source,f.appendChild(c),b(a)):(c.src=a.uri,c.addEventListener("load",function(f){t.delete(c.src);b(a);0==t.size&&G&&JGPortal.unlockMessageQueue()}),t.add(c.src),f.appendChild(c))}function b(a){a.provides.forEach(function(a){F.add(a)});var f=new Set(a.provides);a=
r;r=[];a.forEach(function(a){var b=a.requires;a.requires=[];b.forEach(function(b){f.has(b)||a.requires.push(b)});0==a.requires.length?e(a):r.push(a)})}function c(f,b,c){for(var n in f){var E=f[n];0===$("head > link[href='"+E+"']").length&&$("head link[href$='/portal.css']:last").after("<link rel='stylesheet' href='"+E+"'>")}b&&(f=$("style"),f.text(b),$("head link[href$='/portal.css']:last").after(f));for(var d in c)b=c[d],b.uri&&0<$("head > script[src='"+b.uri+"']").length||a(b)}function d(a){var f=
a.data("onLoad");if(f){f=f.split(".");for(var b=window;b&&0<f.length;)b=b[f.shift()];b&&"function"===typeof b&&b.apply(null,[a])}}function m(){return $(".portlet[data-portlet-id]").map(function(){return $(this).attr("data-portlet-id")}).get()}function g(){return $("#portlet-tabs").tabs().find("> div[data-portlet-id]").map(function(){return $(this).attr("data-portlet-id")}).get()}function q(a){var f=$("#portlet-tabs").tabs(),b=void 0;f.find("> div").filter(function(f){return $(this).attr("data-portlet-id")===
a?(b=f,!0):!1});b&&f.tabs("option","active",b)}function B(a,b,c){for(var f=0;f<a.length;f++){if(a[f]===b)return!0;if(a[f]===c)break}return!1}function C(a,b){a=a.find(".portlet-header");a.find(".ui-icon").remove();b.includes("Edit")&&(a.prepend("<span class='ui-icon ui-icon-wrench portlet-edit'></span>"),a.find(".portlet-edit").on("click",function(){var a=$(this).closest(".portlet").attr("data-portlet-id");JGPortal.sendRenderPortlet(a,"Edit",!0)}));b.includes("DeleteablePreview")&&(a.prepend("<span class='ui-icon ui-icon-delete portlet-delete'></span>"),
a.find(".portlet-delete").on("click",function(){var a=$(this).closest(".portlet").attr("data-portlet-id");JGPortal.sendDeletePortlet(a)}));b.includes("View")&&(a.prepend("<span class='ui-icon ui-icon-fullscreen portlet-expand'></span>"),a.find(".portlet-expand").on("click",function(){var a=$(this).closest(".portlet").attr("data-portlet-id");v(a)?q(a):JGPortal.sendRenderPortlet(a,"View",!0)}))}function D(a,b,c,e){var f=w(a);if(!f){f=L.clone();f.attr("data-portlet-id",a);f.find(".portlet-header").addClass("ui-widget-header ui-corner-all");
C(f,b);b=$(".preview-area");var n=!1;B(x,a,a)&&(b.find(".portlet").each(function(b){b=$(this);var c=b.attr("data-portlet-id");if(!B(x,c,a))return b.before(f),n=!0,!1}),n||b.append(f),n=!0);n||b.first().prepend(f);p()}c=$(c);f.find(".portlet-header-text").text(c.attr("data-portlet-title"));b=f.find(".portlet-content");b.children().detach();b.append(c);d(c);e&&$("#portlet-tabs").tabs("option","active",0)}function p(){if(H){var a=[];$(".overview-panel").find(".preview-area").find("div.portlet[data-portlet-id]").each(function(){a.push($(this).attr("data-portlet-id"))});
var b=[],c=$("#portlet-tabs").tabs();c.find(".ui-tabs-nav .ui-tabs-tab").each(function(a){0<a&&(a=$(this).attr("aria-controls"),a=c.find("#"+a).attr("data-portlet-id"),b.push(a))});JGPortal.sendLayout(a,b,{})}}var k={debug:function(a){console&&console.debug&&console.debug(a)},info:function(a){console&&console.info&&console.info(a)},warn:function(a){console&&console.warn&&console.warn(a)},error:function(a){console&&console.error&&console.error(a)}};JGPortal.log=k;JGPortal.formatMemorySize=function(a,
b,c){void 0===c&&(c=b,b=-1);for(var f=0;1E4<a&&5>f;)a/=1024,f+=1;var d="PiB";switch(f){case 0:d="B";break;case 1:d="kiB";break;case 2:d="MiB";break;case 3:d="GiB";break;case 4:d="TiB"}return 0<=b?(new Intl.NumberFormat(c,{minimumFractionDigits:b,maximumFractionDigits:b})).format(a)+" "+d:(new Intl.NumberFormat(c)).format(a)+" "+d};var l=function(){this._ws=null;this._sendQueue=[];this._recvQueue=[];this._recvQueueLocks=0;this._messageHandlers={};this._refreshTimer=null;this._inactivity=0;this._reconnectTimer=
null;this._connectRequested=!1;this._initialConnect=!0;this._portalSessionId=this._connectionLostNotification=null;this._oldPortalSessionId=sessionStorage.getItem("org.jgrapes.portal.sessionId")};l.prototype.portalSessionId=function(){return this._portalSessionId};l.prototype._connect=function(){var a=("https:"===window.location.protocol?"wss":"ws")+"://"+window.location.host+window.location.pathname;a.endsWith("/")||(a+="/");this._portalSessionId=sessionStorage.getItem("org.jgrapes.portal.sessionId");
a+="portal-session/"+this._portalSessionId;this._oldPortalSessionId&&(a+="?was="+this._oldPortalSessionId,this._oldPortalSessionId=null);k.debug("Creating WebSocket for "+a);this._ws=new WebSocket(a);k.debug("Created WebSocket with readyState "+this._ws.readyState);var b=this;this._ws.onopen=function(){k.debug("OnOpen called for WebSocket.");null!=b._connectionLostNotification&&(b._connectionLostNotification.notification("close"),$("#server-connection-restored-notification").notification({autoClose:2E3}));
b._drainSendQueue();this._initialConnect?this._initialConnect=!1:(m().forEach(function(a){JGPortal.sendRenderPortlet(a,"Preview",!1)}),g().forEach(function(a){JGPortal.sendRenderPortlet(a,"View",!1)}));b._refreshTimer=setInterval(function(){0==b._sendQueue.length&&(b._inactivity+=y,0<z&&b._inactivity>=z?(b.close(),$("#portal-session-suspended-dialog").dialog("option","buttons",{Ok:function(){$(this).dialog("close");b.connect()}}),$("#portal-session-suspended-dialog").dialog("open")):b._send({jsonrpc:"2.0",
method:"keepAlive",params:[]}))},y)};this._ws.onclose=function(a){k.debug("OnClose called for WebSocket (reconnect: "+b._connectRequested+").");null!==b._refreshTimer&&(clearInterval(b._refreshTimer),b._refreshTimer=null);b._connectRequested&&(null==b._connectionLostNotification?b._connectionLostNotification=$("#server-connection-lost-notification").notification({error:!0,icon:"alert",destroyOnClose:!1}):b._connectionLostNotification.notification("open"),b._initiateReconnect())};this._ws.onmessage=
function(a){try{var f=JSON.parse(a.data)}catch(u){k.error(u.name+":"+u.lineNumber+":"+u.columnNumber+": "+u.message+". Data: ");k.error(a.data);return}b._recvQueue.push(f);1===b._recvQueue.length&&b._handleMessages()}};l.prototype.connect=function(){this._connectRequested=!0;var a=this;$(window).on("beforeunload",function(){k.debug("Closing WebSocket due to page unload");a._connectRequested=!1;a._ws.close()});this._connect()};l.prototype.close=function(){this._portalSessionId&&this._send({jsonrpc:"2.0",
method:"disconnect",params:[this._portalSessionId]});this._connectRequested=!1;this._ws.close()};l.prototype._initiateReconnect=function(){if(!this._reconnectTimer){var a=this;this._reconnectTimer=setTimeout(function(){a._reconnectTimer=null;a._connect()},1E3)}};l.prototype._drainSendQueue=function(){for(;this._ws.readyState==this._ws.OPEN&&0<this._sendQueue.length;){var a=this._sendQueue[0];try{this._ws.send(a),this._sendQueue.shift()}catch(n){k.warn(n)}}};l.prototype._send=function(a){this._sendQueue.push(JSON.stringify(a));
this._drainSendQueue()};l.prototype.send=function(a){this._inactivity=0;this._send(a)};l.prototype.addMessageHandler=function(a,b){this._messageHandlers[a]=b};l.prototype._handleMessages=function(){for(;!(0===this._recvQueue.length||0<this._recvQueueLocks);){var a=this._recvQueue.shift(),b=this._messageHandlers[a.method];b?a.hasOwnProperty("params")?b.apply(null,[].concat($jscomp.arrayFromIterable(a.params))):b():k.error("No handler for invoked method "+a.method)}};l.prototype.lockMessageReceiver=
function(){this._recvQueueLocks+=1};l.prototype.unlockMessageReceiver=function(){--this._recvQueueLocks;0==this._recvQueueLocks&&this._handleMessages()};var h=new l;JGPortal.lockMessageQueue=function(){h.lockMessageReceiver()};JGPortal.unlockMessageQueue=function(){h.unlockMessageReceiver()};var y,z;JGPortal.init=function(a,b,c){sessionStorage.setItem("org.jgrapes.portal.sessionId",a);y=b;z=c;h.connect();k.debug("Locking screen");$("body").faLoading({icon:"fa-circle-o-notch",spin:!0,text:!1});$("#theme-menu").on("click",
"[data-theme-id]",function(){JGPortal.sendSetTheme($(this).data("theme-id"));$("#theme-menu").jqDropdown("hide")});$("#language-menu").on("click","[data-locale]",function(){JGPortal.sendSetLocale($(this).data("locale"));$("#theme-menu").jqDropdown("hide")});$("#addon-menu").on("click","[data-portlet-type]",function(){JGPortal.sendAddPortlet($(this).data("portlet-type"));$("#theme-menu").jqDropdown("hide")});$("#portlet-tabs").tabs();var f=$("#portlet-tabs").tabs();f.on("click","span.ui-icon-close",
function(){var a=$(this).closest("li").remove().attr("aria-controls");$("#"+a).remove();f.tabs("refresh");p()});$("#portal-session-suspended-dialog").dialog({autoOpen:!1,modal:!0});$(".preview-area").sortable({handle:".portlet-header",cancel:".portlet-toggle",placeholder:"portlet-placeholder ui-corner-all",stop:function(a,b){p()}});JGPortal.sendPortalReady()};var F=new Set,r=[],t=new Set,G=!1;h.addMessageHandler("addPageResources",c);h.addMessageHandler("addPortletType",function(a,b,d,e,g){c(d,null,
e);a=$('<li class="ui-menu-item"><div class="ui-menu-item-wrapper" data-portlet-type="'+a+'">'+b+"</div></li>");$("#addon-menu-list").append(a)});var x=[],H=!1,A={};h.addMessageHandler("lastPortalLayout",function(a,b,c){x=a;0<t.size&&(JGPortal.lockMessageQueue(),G=!0)});JGPortal.registerPortletMethod=function(a,b,c){var f=A[a];f||(f={},A[a]=f);f[b]=c};h.addMessageHandler("notifyPortletView",function(a,b,c,d){(a=A[a])&&(c=a[c])&&c(b,d)});h.addMessageHandler("portalConfigured",function(){H=!0;p();k.debug("Unlocking screen");
$("body").faLoading("remove")});JGPortal.findPortletPreview=function(a){a=$(".portlet[data-portlet-id='"+a+"']");if(1===a.length)return $(a[0])};var w=JGPortal.findPortletPreview;JGPortal.findPortletView=function(a){a=$("#portlet-tabs").tabs().find("> div[data-portlet-id='"+a+"']");if(1===a.length)return $(a[0])};var v=JGPortal.findPortletView;JGPortal.updatePortletViewTitle=function(a,b){var c=$("#portlet-tabs").tabs();a=c.find("> div[data-portlet-id='"+a+"']");0!==a.length&&(a.find("[data-portlet-title]").attr("data-portlet-title",
b),a=a.attr("id"),c=c.find("a[href='#"+a+"']"),c.empty(),c.append(b))};var L=$('<div class="portlet ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"><div class="portlet-header ui-widget-header"><span class="portlet-header-text"></span></div><div class="portlet-content ui-widget-content"></div></div>');JGPortal.updatePortletModes=function(a,b){(a=w(a))&&C(a,b)};var I=1;h.addMessageHandler("updatePortlet",function(a,b,c,e,g){if("Preview"===b||"DeleteablePreview"===b)D(a,c,e,g);else if("View"===
b){c=v(a);e=$(e);if(c)c.children().detach(),c.append(e);else{b=$("#portlet-tabs").tabs();I+=1;c="portlet-tabs-"+I;var f=$("<li><a href='@{href}'>@{label}</a> <span class='ui-icon ui-icon-close' role='presentation'>Remove Tab</span></li>".replace(/@\{href\}/g,"#"+c).replace(/@\{label\}/g,e.attr("data-portlet-title")));b.find(".ui-tabs-nav").append(f);c=$("<div id='"+c+"'></div>");c.append(e);c.attr("data-portlet-id",a);b.append(c);b.tabs("refresh");p()}d(e);g&&q(a)}else"Edit"===b&&(g=$(e),g.dialog({modal:!0,
width:"auto"}),g.attr("data-portlet-id",a),d(g))});h.addMessageHandler("deletePortlet",function(a){var b=v(a);b&&(b=b.closest(".ui-tabs-panel").remove().attr("id"),$("#portlet-tabs").tabs().find("li[aria-controls='"+b+"']").remove(),$("#portlet-tabs").tabs().tabs("refresh"));(a=w(a))&&a.remove();p()});h.addMessageHandler("retrieveLocalData",function(a){var b=[];try{for(var c=0;c<localStorage.length;c++){var d=localStorage.key(c);if(!a.endsWith("/")){if(d!==a)continue}else if(!d.startsWith(a))continue;
var e=localStorage.getItem(d);b.push([d,e])}}catch(K){k.error(K)}JGPortal.sendLocalData(b)});h.addMessageHandler("storeLocalData",function(a){try{for(var b in a){var c=a[b];"u"===c[0]?localStorage.setItem(c[1],c[2]):"d"===c[0]&&localStorage.removeItem(c[1])}}catch(J){k.error(J)}});h.addMessageHandler("displayNotification",function(a,b){$(a).notification(b)});h.addMessageHandler("reload",function(){window.location.reload(!0)});JGPortal.sendPortalReady=function(){h.send({jsonrpc:"2.0",method:"portalReady"})};
JGPortal.sendSetTheme=function(a){h.send({jsonrpc:"2.0",method:"setTheme",params:[a]})};JGPortal.sendSetLocale=function(a){h.send({jsonrpc:"2.0",method:"setLocale",params:[a]})};JGPortal.sendRenderPortlet=function(a,b,c){h.send({jsonrpc:"2.0",method:"renderPortlet",params:[a,b,c]})};JGPortal.sendAddPortlet=function(a){h.send({jsonrpc:"2.0",method:"addPortlet",params:[a,"Preview"]})};JGPortal.sendDeletePortlet=function(a){h.send({jsonrpc:"2.0",method:"deletePortlet",params:[a]})};JGPortal.notifyPortletModel=
function(a,b,c){for(var d=[],e=2;e<arguments.length;++e)d[e-2]=arguments[e];void 0===d?h.send({jsonrpc:"2.0",method:"notifyPortletModel",params:[a,b]}):h.send({jsonrpc:"2.0",method:"notifyPortletModel",params:[a,b,d]})};JGPortal.sendLayout=function(a,b,c){h.send({jsonrpc:"2.0",method:"portalLayout",params:[a,b,c]})};JGPortal.sendLocalData=function(a){h.send({jsonrpc:"2.0",method:"retrievedLocalData",params:[a]})}})();
(function(){JGPortal.tooltip=function(a){a.tooltip({items:"[data-tooltip-id], [title]",content:function(){var a=$(this);if(a.is("[data-tooltip-id]")){a=a.attr("data-tooltip-id");var b=$("#"+a);return b?(b=b.clone(!0),b.removeClass("jgrapes-tooltip-prototype"),b):"<#"+a+">"}if(a.is("[title]"))return a.attr("title")}})}})();
(function(){var a=null,e=0;$(function(){var b=$("<div></div>");a=$("<div class='ui-notification-container ui-front'></div>");b.append(a);$("body").prepend(b)});$.widget("ui.notification",{options:{classes:{"ui-notification":"ui-corner-all ui-widget-shadow","ui-notification-content":"ui-corner-all"},error:!1,icon:"circle-info",autoOpen:!0,autoClose:null,destroyOnClose:null,show:{effect:"blind",direction:"up",duration:"fast"},hide:{effect:"blind",direction:"up",duration:"fast"}},_create:function(){var a=
this;this._isOpen=!1;null===this.options.destroyOnClose&&(this.options.destroyOnClose=this.options.autoOpen);var c=$("<div></div>"),d="ui-notification-"+ ++e;c.attr("id",d);this._addClass(c,"ui-notification");c.addClass("ui-widget-content");c.addClass("ui-widget");this.options.error?c.addClass("ui-state-error"):c.addClass("ui-state-highlight");d=$("<button></button>");d.addClass("ui-notification-close");d.button({icon:"ui-icon-close",showLabel:!1});d.on("click",function(){a.close()});c.append(d);
this.options.icon&&c.append($('<span class="ui-notification-content ui-icon ui-icon-'+this.options.icon+'"></span>'));d=$("<div></div>");this._addClass(d,"ui-notification-content");c.append(d);d.append(this.element.clone());d.find(":first-child").show();c.hide();this.options.autoClose&&setInterval(function(){a.close()},this.options.autoClose);this.notification=c;this.options.autoOpen&&this.open()},open:function(){a.prepend(this.widget());this._isOpen=!0;this._show(this.widget(),this.options.show)},
widget:function(){return this.notification},close:function(){var a=this;this._isOpen=!1;this._hide(this.widget(),this.options.hide,function(){a.options.destroyOnClose&&a.destroy()})},_destroy:function(){this._isOpen&&this.close()}})})();
//# sourceMappingURL=functions.min.js.map
